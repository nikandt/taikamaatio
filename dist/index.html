<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <meta name="google-site-verification" content="9mmBkEiEoEBSaYKU5r8OUhndmjjSTMXVpHnceJIYSRI" />
        <title>Taikamaatio</title>
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link rel="preconnect" href="https://fonts.gstatic.com" />
        <link href="https://fonts.googleapis.com/css2?family=Cutive&amp;family=Teko:wght@300..700&amp;display=swap" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&amp;display=swap" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
        <style>
            body,
            html {
                margin: 0;
                padding: 0;
                width: 100%;
                height: 100%;
                overflow-y: auto; /* Enable vertical scrolling */
                overflow-x: hidden; /* Disable horizontal scrolling */
            }
            #container {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: -1; /* Background layer */
            }
            .masthead {
                position: relative;
                overflow: hidden;
                z-index: 2;
                display: flex;
                align-items: center;
                justify-content: center;

                // Overlay for the masthead
                &:before {
                    content: '';
                    position: absolute;
                    top: 0;
                    bottom: 0;
                    right: 0;
                    left: 0;
                    height: 100%;
                    width: 100%;
                    background-color: rgba(0, 0, 0, 0.2); // Reduced opacity for more transparency
                }
            }
            .masthead-content {
                position: relative;
                max-width: 40rem;
                padding-top: 5rem;
                padding-bottom: 5rem;
            }

            footer {
                position: relative; /* Ensure footer is not overlapped by other elements */
                width: 100%;
                background-color: #000;
                color: #fff;
                text-align: center;
                padding: 20px 0;
                display: flex;
                justify-content: space-around;
                flex-wrap: wrap;
                z-index: 1; /* Ensure it is above any background layers */
                font-family: 'DM Sans', sans-serif;
            }
            .footer-section {
                flex: 1 1 200px; /* Flexbox for responsive design */
                margin: 10px;
            }
            @media (max-width: 600px) {
                footer {
                    flex-direction: column;
                    align-items: center;
                }
                .footer-section {
                    margin: 5px 0;
                }
                body,
                html {
                    overflow-y: hidden; /* Hide vertical scrollbar on mobile devices */
                }
            }
            /* Minimalist scrollbar */
            ::-webkit-scrollbar {
                width: 8px;
            }
            ::-webkit-scrollbar-track {
                background: #f1f1f1;
            }
            ::-webkit-scrollbar-thumb {
                background: #888;
                border-radius: 10px;
            }
            ::-webkit-scrollbar-thumb:hover {
                background: #555;
            }
        </style>
    </head>
    <body>
        <!-- Three.js Container-->
        <div id="container"></div>
        <!-- Masthead-->
        <div class="masthead">
            <div class="masthead-content text-white">
                <div class="container-fluid px-4 px-lg-0">
                    <h1 class="lh-1 mb-4">Taikamaatio</h1>
                    <p class="mb-5">Jätä yhteydenottopyyntö</p>
                    <form id="contactForm" data-sb-form-api-token="360bc9c6-4137-4504-86e0-10b85e5da7bb">
                        <!-- Email address input-->
                        <div class="row input-group-newsletter">
                            <div class="col"><input class="form-control" id="email" type="email" placeholder="Sähköpostiosoite..." aria-label="Sähköpostiosoite..." data-sb-validations="required,email" /></div>
                            <div class="col-auto"><button class="btn btn-primary disabled" id="submitButton" type="submit">Lähetä</button></div>
                        </div>
                        <div class="invalid-feedback mt-2" data-sb-feedback="email:required">Sähköpostiosoite on pakollinen.</div>
                        <div class="invalid-feedback mt-2" data-sb-feedback="email:email">Sähköpostiosoite ei kelpaa.</div>
                        <!-- Submit success message-->
                        <!---->
                        <!-- This is what your users will see when the form-->
                        <!-- has successfully submitted-->
                        <div class="d-none" id="submitSuccessMessage">
                            <div class="text-center mb-3 mt-2"><div class="fw-bolder">Onnistui!</div></div>
                        </div>
                        <!-- Submit error message-->
                        <!---->
                        <!-- This is what your users will see when there is-->
                        <!-- an error submitting the form-->
                        <div class="d-none" id="submitErrorMessage"><div class="text-center text-danger mb-3 mt-2">Tapahtui virhe!</div></div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Social Icons-->
        <!-- For more icon options, visit https://fontawesome.com/icons?d=gallery&p=2&s=brands-->
        <div class="social-icons">
            <!--.d-flex.flex-row.flex-lg-column.justify-content-center.align-items-center.h-100.mt-3.mt-lg-0-->
            <!--   a.btn.btn-dark.m-3(href='https://instagram.com/taikamaatio')-->
            <!--       i.fab.fa-instagram-->
        </div>
        <footer>
            <div class="footer-section"><p>Y-tunnus: 3129930-8</p></div>
            <div class="footer-section"><p>&copy 2024 Taikamaatio Oy</p></div>
        </footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
        <!-- Three.js Importmap-->
        <script type="importmap">
            {
                "imports": {
                    "three": "https://cdn.jsdelivr.net/npm/three/build/three.module.js",
                    "three/addons/": "https://cdn.jsdelivr.net/npm/three/examples/jsm/"
                }
            }
        </script>
        <!-- Three.js Script-->
        <script type="module">
            import * as THREE from 'three';
            import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
            import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
            import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';
            import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';
            import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';
            import { OutputPass } from 'three/addons/postprocessing/OutputPass.js';

            let camera, renderer, mixer, clock, composer;

            const params = {
                threshold: 0,
                strength: 1,
                radius: 0,
                exposure: 1,
            };

            init();

            async function init() {
                const container = document.getElementById('container');

                clock = new THREE.Clock();

                const scene = new THREE.Scene();
                scene.background = new THREE.Color(0x000000);

                camera = new THREE.PerspectiveCamera(40, window.innerWidth / window.innerHeight, 1, 100);
                camera.position.set(-5, 2.5, -3.5);
                scene.add(camera);

                scene.add(new THREE.AmbientLight(0xcccccc));

                const pointLight = new THREE.PointLight(0xffffff, 100);
                camera.add(pointLight);

                const loader = new GLTFLoader();
                const gltf = await loader.loadAsync('PrimaryIonDrive.glb');

                const model = gltf.scene;
                scene.add(model);

                // Replace all mesh materials with red MeshStandardMaterial
                //model.traverse((node) => {
                //    if (node.isMesh) {
                //      node.material = new THREE.MeshStandardMaterial({ color: 0x0000ff });
                //    }
                //});

                mixer = new THREE.AnimationMixer(model);
                const clip = gltf.animations[0];
                mixer.clipAction(clip.optimize()).play();

                renderer = new THREE.WebGLRenderer({ antialias: true });
                renderer.setPixelRatio(window.devicePixelRatio);
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.setAnimationLoop(animate);
                renderer.toneMapping = THREE.ReinhardToneMapping;
                container.appendChild(renderer.domElement);

                const renderScene = new RenderPass(scene, camera);

                const bloomPass = new UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight), 1.5, 0.4, 0.85);
                bloomPass.threshold = params.threshold;
                bloomPass.strength = params.strength;
                bloomPass.radius = params.radius;

                const outputPass = new OutputPass();

                composer = new EffectComposer(renderer);
                composer.addPass(renderScene);
                composer.addPass(bloomPass);
                composer.addPass(outputPass);

                const controls = new OrbitControls(camera, renderer.domElement);
                controls.maxPolarAngle = Math.PI * 0.5;
                controls.minDistance = 3;
                controls.maxDistance = 8;

                window.addEventListener('resize', onWindowResize);
            }

            function onWindowResize() {
                const width = window.innerWidth;
                const height = window.innerHeight;

                camera.aspect = width / height;
                camera.updateProjectionMatrix();

                renderer.setSize(width, height);
                composer.setSize(width, height);
            }

            function animate() {
                const delta = clock.getDelta();

                mixer.update(delta);

                composer.render();
            }
        </script>
    </body>
</html>
